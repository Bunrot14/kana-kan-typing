<!DOCTYPE html>

<html lang="ja">
<head>
<link href="https://typingwithclavier.com/index.html" rel="canonical"/>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=BIZ+UDMincho&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=BIZ+UDPMincho&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Rounded+Mplus+1c&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=BIZ+UDPGothic&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New&amp;display=swap" rel="stylesheet"/>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-84N6PLRMJY">
</script>
<script>
   window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-84N6PLRMJY');
  </script>
<meta charset="utf-8"/>
<!--adsenseのもの-->
<script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8332431277909692">
</script>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="ZqIqYlZDifbNwvYH5bcib3CigI-syrHrCMTkBAhal7c" name="google-site-verification"/>
<!--paypal.コード-->
<script src="https://www.paypal.com/sdk/js?client-id=BAAix0TQkbmjXHMdtLABs3WdFS2aVTUl8VGNO3aPgOJcDRsIr2sIMsMjfB3xX0-KxIIHsxrwuqIXVfZ-YI&amp;components=hosted-buttons&amp;disable-funding=venmo¤cy=JPY">
</script>
<title>
   かな漢タイピング｜変換ありの文学的長文で集中力を高めるタイピング練習
  </title>
<meta content="漢字変換あり長文タイピング練習サイト。文学的な創作文で瞑想のように心を整える新しいタイピング体験。毎日更新。" name="description"/>
<meta content="タイピング, 長文, かな漢字変換, 瞑想, 文学, 毎日更新, 静かに集中 , 哲学, 詩, 読書, かな漢タイピング,変換,タイピングサイト" name="keywords"/>
<meta content="Bunrot" name="author"/>
<!-- OGPタグ -->
<meta content="かな漢タイピング｜静かに集中する変換あり長文タイピング練習" property="og:title"/>
<meta content="文学的な日本語長文で心を整えるタイピング体験を。" property="og:description"/>
<meta content="https://www.typingwithclavier.com/assets/OGP_Clavier.png" property="og:image"/>
<meta content="https://www.typingwithclavier.com/" property="og:url"/>
<meta content="website" property="og:type"/>
<!-- Twitterカードタグ -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="かな漢タイピング" name="twitter:title"/>
<meta content="文学的な日本語長文で心を整えるタイピング体験を。" name="twitter:description"/>
<meta content="https://www.typingwithclavier.com/assets/OGP_Clavier.png" name="twitter:image"/>
<style>
   * {
  box-sizing: border-box;
}

html, body {
  margin: 0;
  padding: 0;
}


    body {
      font-family: 'Yu Gothic', sans-serif;
      background: #f5f5f5;
      padding: 2rem;
      line-height: 1.8;
    }

    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }

    .problem-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 1rem;
      flex-wrap: wrap; /* ボタンが多すぎるときに折り返すように */
    }

    .problem-buttons button {
      padding: 0.5rem 1rem;
      background: #ccc;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }

    .problem-buttons button:hover {
      background: #aaa;
    }
    
    .problem-buttons button.active { /* 現在選択中の問題セットのボタンを強調 */
      background: #888;
      color: white;
    }

    #display,
    #typingArea {
      width: 65vw;
      font-size: 14.5px;
      border-radius: 8px;
    }

/* --- 朝の霧：やや青みを帯びた落ち着いたグレー系 --- */
#display {
  background-color: #EEF1F4; /* ごく淡いブルーグレー */
  color: #2c2f33; /* 濃いグレーで可読性を保つ */
  padding: 1rem;
  margin-bottom: 1rem;
  white-space: pre-wrap;
  overflow-wrap: break-word;
  word-break: break-word;
  min-height: 100px;
  border: 1px solid #d1d8e0;
  border-radius: 8px;
   font-size: 0.945em;
    
}

.untyped {
  color: #2c2f33 !important;
}

.correct {
  background-color: #d2e3f3 !important; /* 淡い青 */
  color: #134684 !important;
}

.incorrect {
  color: #cc3333 !important;
  background-color: #f6d8d8 !important;
}
/* --- 朝の霧ここまで --- */


    #typingArea {
      width: 65vw;
    height: auto;
    min-height: 150px; /* 最小高さ */
    max-height: 600px; /* 最大高さ */
    overflow-y: auto; /* 内容が最大を超えたらスクロール */    
      padding: 1rem;
      line-height: 1.5;
      resize: none;
      border-radius: 8px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      font-family: inherit;
       font-size: 0.945em;
    }

    #popup {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  border: 2px solid #888;
  padding: 1.5em;
  min-width: 300px;       /* 最小幅：小さい表示にも対応 */
  max-width: 90vw;        /* 最大幅：画面の90%まで広がる */
  width: fit-content;     /* 内容に応じて幅を調整 */
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
  z-index: 9999;
  font-family: "Yu Gothic", sans-serif;
  line-height: 1.5;
  word-break: break-word;
  white-space: normal;    /* 長文がちゃんと改行されるように */
}

#popup ul {
  padding-left: 1.5rem;
  list-style-type: none;
  margin: 1rem 0;
}

#popup ul li::before {
  content: "◆ ";
  color: #777;
}

#popupList li {
  margin-bottom: 0.6em;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#archive-list {
  margin-top: 1rem;
  text-align: left;
}

.archive-entry {
  margin-bottom: 1rem;
}

.archive-entry p {
  font-weight: bold;
  margin-bottom: 0.5rem;
}

.archive-titles {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.archive-titles button {
  padding: 0.3rem 1rem;
  background: #ccc;
  border: none;
  cursor: pointer;
  border-radius: 5px;
  font-size: 14px;
}

.archive-titles button:hover {
  background: #aaa;
}

#archive-list a {
  text-align: left;
  margin-left: 0;
  display: inline-block;
  margin-top: 1rem;
  color: #007acc;
  text-decoration: none;
}

/* index.html の <style> タグ内に追加 */

/* 「使い方」ボタンと「閉じる」ボタンの共通スタイル */
.usage-action-button {
    padding: 0.6em 1.2em; /* 少し余白を増やして存在感を出す */
    background: #ffffff;   /* 背景 */
    color: #2980b9;       /* 文字色 */
    border: 1px solid #2980b9; /* 枠線 */
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.85em;      /* 少しだけフォントサイズを上げる */
    font-weight: 600;       /* 文字を少し太くして視認性アップ */
    transition: background-color 0.2s ease-out, color 0.2s ease-out, transform 0.1s ease-out, box-shadow 0.2s ease-out;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05); /* ごく控えめな影で立体感を */
}

.usage-action-button:hover {
    background: #005a99;   /* ホバーで背景色と文字色を反転 */
    color: #fff;
    border-color: #004c80; /* ホバー時の枠線を少し濃く */
    transform: translateY(-1px); /* わずかに浮き上がる効果 */
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* 説明文表示エリアのスタイル */
.usage-guide-wrapper {
    position: fixed; /* 画面固定表示 (モーダル風) */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* 半透明の背景 */
    display: flex; /* display: none; はJSで制御 */
    align-items: center;
    justify-content: center;
    z-index: 10000; /* 他の要素より手前に */
    opacity: 0; /* 初期状態は透明 */
    visibility: hidden; /* 初期状態は非表示 */
    transition: opacity 0.3s ease, visibility 0.3s ease;
}
.usage-guide-wrapper.visible { /* 表示時のスタイル */
    opacity: 1;
    visibility: visible;
}

.usage-guide-content {
    background-color: #fff;
    padding: 25px 30px;
    border-radius: 8px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    width: 90%;
    max-width: 680px; /* 最大幅 */
    max-height: 80vh; /* 最大高さ */
    overflow-y: auto; /* 内容が多い場合はスクロール */
    position: relative; /* 閉じるボタンの位置基準用 */
}
.usage-guide-content h2 {
    text-align: center;
    margin-top: 0;
    margin-bottom: 25px;
    color: #333;
    font-size: 1.6em;
}

/* アコーディオンリストのスタイル */
.accordion-list {
    list-style: none;
    padding: 0;
    margin: 0;
}
.accordion-list li {
    margin-bottom: 10px;
}
.accordion-header {
    background-color: #f0f0f0;
    color: #333;
    cursor: pointer;
    padding: 12px 18px;
    width: 100%;
    text-align: left;
    border: none;
    outline: none;
    font-size: 1.1em;
    font-weight: bold;
    border-radius: 5px;
    transition: background-color 0.2s;
    display: block; /* 幅100%にするため */
    margin-bottom: 5px; /* パネルとの間に少し隙間 */
}
.accordion-header:hover, .accordion-header.active {
    background-color: #d8d8d8;
}
.accordion-header.active::after { /* 開いている印 (任意) */
    content: " －"; 
}
.accordion-header::after { /* 閉じている印 (任意) */
    content: " ＋";
    float: right;
}

.accordion-panel {
    padding: 0 18px; /* 上下のpaddingはmax-heightのアニメーション時に調整 */
    background-color: white;
    /* display: none; を削除、またはコメントアウト */
    max-height: 0; /* ★初期状態では高さを0にして内容を隠す */
    overflow: hidden; /* ★はみ出した内容を隠す */
     padding-top: 0;    /* ← 初期状態では上下のpaddingも0に */
    padding-bottom: 0; /* ← 初期状態では上下のpaddingも0に */
    border: 1px solid #f0f0f0;
    border-top: none;
    border-radius: 0 0 5px 5px;
    line-height: 1.7;
    transition: max-height 0.3s ease-out, padding-top 0.3s ease-out, padding-bottom 0.3s ease-out; /* ★スムーズな開閉アニメーション */
}

.accordion-panel.open { /* パネルが開いた状態のスタイル */
    max-height: 500px; /* ★内容が表示されるのに十分な高さを設定 (必要なら調整) */
    padding-top: 15px;    /* 開いた時の上下のpadding */
    padding-bottom: 15px;
}
.accordion-panel p {
    margin-top: 10px;
    margin-bottom: 10px;
}
.accordion-panel p:first-child {
    margin-top: 0;
}
.accordion-panel .text-link { /* 説明文中のリンクスタイル */
    color: #007acc;
    text-decoration: none;
}
.accordion-panel .text-link:hover {
    text-decoration: underline;
}

.usage-guide-content .close-button {
    display: block;
    margin: 25px auto 0 auto; /* 中央寄せ */
    background-color: #555; /* 少し濃いめの背景 */
    color: white;
}
.usage-guide-content .close-button:hover {
    background-color: #333;
}

/* index.html の <style> タグ内に追加または既存のものを修正 */

.problem-container {
    display: flex;
    align-items: center;
    width: 100%;
    padding: 5px 0px; /* 左右のパディングで中央の表示領域を制御 */
    box-sizing: border-box;
}

.header-left-controls {
     /* flex: 3.3; を削除または以下のように変更 */
    flex-grow: 0;     /* 伸びない */
    flex-shrink: 0;   /* 基本的に縮まない (コンテンツ幅による) */
    flex-basis: auto; /* コンテンツに応じた幅 */
    /* display: flex; flex-direction: column; align-items: flex-start; はそのまま */
    display: flex;
    flex-direction: column;
    align-items: flex-start;
     margin-right: 15px;
}

.title-and-usage-container { /* ★新しいラッパー要素のスタイル */
    display: flex;
    align-items: center; /* タイトルとボタンを垂直中央揃え */
    /* justify-content: center;  もしこのコンテナ内でさらに中央寄せしたい場合 */
    position: relative; /* 位置調整の基準を現在の位置にする */
    left: 75px;       /* 現在の位置から左に10pxオフセット（つまり右に10px移動）*/
                      /* この値を増やすとより右に、減らすと左に移動します。 */
                      /* 負の値を指定すると左にずれます (例: left: -5px;) */
}

.title-and-usage-container h1 {
    /* margin: 0; */ /* デフォルトのマージンをリセット */
    margin-right: 15px; /* ★使い方ボタンとの間のスペース */
    font-size: 1.8em; /* 以下、既存のh1スタイル */
    font-weight: 600;
    color: #2c3e50;
}

.problem-container h1 { /* h1のスタイルをここに集約 */
    /*flex-grow: 1;        ★重要: 残りのスペースを全て取るようにする */
    text-align: center; /* テキストを中央揃え */
    margin: 0;     /* 左右の要素との間に最低限の余白 */
    padding: 0;
    font-size: 2.0em;
    font-weight: 600;
    color: #000000;
    min-width: 0;
    /* flex-shrink: 0; は flex-grow: 1 があれば通常不要 */
}

.header-right-controls {
    flex-grow: 0;     /* 伸びない */
    flex-shrink: 0;   /* 基本的に縮まない */
    flex-basis: auto; /* コンテンツに応じた幅 */
    /* display: flex; justify-content: flex-end; align-items: center; はそのまま */
    display: flex;
    justify-content: flex-end;
    align-items: center;
     margin-left: 15px;
}

/* 既存の .problem-header, #problem-buttons, .usage-action-button のスタイルはそのまま活用 */

 .donation-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 40px;
    flex-wrap: wrap; /* 画面が狭いときは折り返す */
    margin: 2em 0;
  }

  .donation-box {
    flex: 1 1 300px;
    max-width: 400px;
    text-align: center;
  }

  .donation-box h4 {
    margin-bottom: 1em;
    font-size: 1rem;
  }

  /*フッターの上の三つのリンクのスタイルが以下*/
.archive-link {
  color: #007acc;
  text-decoration: none;
  transition: all 0.3s ease;
}

.archive-link:hover {
  color: #005b99;
  text-decoration: underline;
  transform: scale(1.05);
}

/* 「問題文の裏庭」の特別なスタイル */
.criticism-link {
  color: #009b00de;
  text-decoration: none;
  transition: all 0.3s ease;
}

.criticism-link:hover {
  color: #006b00;
  background-color: rgba(0, 155, 0, 0.1);
  border-radius: 4px;
  padding: 2px 4px;
  text-decoration: underline;
}
  </style>
<style>
   /* ヘッダーに表示するメッセージのスタイル */
    .site-intro {
      font-size: 0.7em; /* 小さめの文字サイズ */
      color: #888; /* 優しいグレー */
      text-align: center; /* 中央揃え */
      margin: 1px 0; /* 上下のマージンで余裕を持たせる */
      font-family: 'Arial', sans-serif; /* 優しい雰囲気のフォント */
    }

    .intro-close-button {
  margin-top: 0em;
  font-size: 0.55em;
  padding: 4px 8px;
  background-color: #ffffff;
  color: #444;
  border: 1px solid #aaa;
  border-radius: 4px;
  cursor: pointer;
}

.intro-close-button:hover {
  background-color: #bbb;
}
/* ======== レスポンシブ対応CSS ======== */
@media (max-width: 900px) {
  body {
    padding: 1rem !important;
  }

  #display, #typingArea {
    width: 98vw !important;
    min-width: 0 !important;
    max-width: 100vw !important;
    font-size: 1em !important;
  }

  .problem-container {
    flex-direction: column !important;
    align-items: stretch !important;
  }

  .title-and-usage-container {
    left: 0 !important;
    justify-content: flex-start !important;
    margin-top: 1rem;
    flex-direction: column !important;
    align-items: flex-start !important;
  }

  .title-and-usage-container h1 {
    font-size: 1.3em !important;
    margin-bottom: 0.6em;
  }
  .header-left-controls, .header-right-controls {
    margin: 0 !important;
    align-items: flex-start !important;
  }
}

@media (max-width: 600px) {
  html, body {
    font-size: 15px !important;
    padding: 0.5rem !important;
  }

  #display, #typingArea {
    width: 99vw !important;
    min-width: 0 !important;
    max-width: 100vw !important;
    padding: 0.7rem !important;
    font-size: 1em !important;
  }

  .donation-container {
    flex-direction: column !important;
    gap: 16px !important;
  }
  .donation-box {
    max-width: 100vw !important;
    min-width: 0 !important;
  }

  .problem-buttons,
  .archive-titles {
    flex-wrap: wrap !important;
    gap: 7px !important;
    justify-content: flex-start !important;
  }

  .archive-titles button,
  .problem-buttons button {
    font-size: 1em !important;
    padding: 6px 12px !important;
    min-width: 88px;
  }
}

/* モーダルやポップアップの最大幅を調整 */
@media (max-width: 600px) {
  .usage-guide-content,
  #popup {
    max-width: 95vw !important;
    min-width: 0 !important;
    padding: 0.8em !important;
    font-size: 1em !important;
  }
}

/* アーカイブなどの余白も調整 */
@media (max-width: 600px) {
  #archive {
    margin-top: 1.2rem !important;
    padding: 0 !important;
  }
  #archive-list {
    margin-top: 0.8rem !important;
  }
}

/* サイトイントロやフッターも余白調整 */
@media (max-width: 600px) {
  .site-intro {
    font-size: 0.95em !important;
    padding: 0.4em !important;
    line-break: strict;
  }
  footer {
    font-size: 0.95em !important;
    padding: 0.2em !important;
  }
}

<!--お気に入り関連CSS-->
.favorite-button-fixed {
  position: absolute;
  display: flex;
  justify-content: flex-end;
  align-items: flex-end;
  pointer-events: none; /* 初期は非アクティブで浮かせるだけ */
}

.favorite-button-fixed button {
  pointer-events: auto; /* ボタンだけクリック可能 */
  font-size: 0.85em;
  padding: 6px 10px;
  border: 1px solid #aaa;
  background-color: #fffdf9;
  color: #555;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.2s ease, color 0.2s ease;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.favorite-button-fixed button:hover {
  background-color: #f0e6cc;
  color: #000;
}
.favorite-button-fixed button.active {
  background-color: #ffe08a;
  color: #000;
  border-color: #c9a634;
}

  </style>
<link href="/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"/>
<link href="/favicon.svg" rel="icon" type="image/svg+xml"/>
<link href="/favicon.ico" rel="shortcut icon"/>
<link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<link href="/site.webmanifest" rel="manifest"/>
</head>
<body>
<header style="display: flex; flex-direction: column; align-items: center;">
<p class="site-intro" id="siteIntro">
    このサイトは静かに集中してタイピングの瞑想性を引き出すことと、変換ありの実践的なタイピングスキルを向上させることを目的とした無償の学習サービスです。
    <br/>
    言葉のリズムと流れに身を任せ、指先で紡ぐ文章が心を穏やかにし、思考を深めていく。
    <br/>
    ここではただ速さを追い求めるのではなく、ひとつひとつの文字に心を込めてタイピングを楽しんでください。
    <button class="intro-close-button" id="closeIntroBtn">
     閉じる
    </button>
</p>
<div class="problem-container">
<div class="header-left-controls">
<div class="problem-header" id="problem-header-date" style="font-size: 0.9em; color: #555; text-align: left; margin-bottom: 5px;">
</div>
<div class="problem-buttons" id="problem-buttons">
</div>
</div>
<div class="title-and-usage-container">
<div style="margin-top: 1rem; text-align: center;">
 <a href="../index.html" class="criticism-link" style="font-weight: bold;">＜トップページに戻る＞</a>
</div>

</div>
<div class="header-spacer-right">
</div>
</div>
</header>
<div class="usage-guide-wrapper" id="usageGuideContainer">
<div class="usage-guide-content">
<h2>
     サイトの使い方・概要
    </h2>
<ul class="accordion-list">
<li>
<button class="accordion-header">
       サイトの目的
      </button>
<div class="accordion-panel">
<p>
        本サイトはタイピングを静かに心を澄ませるための行為として捉えることを目指しています。速さを追い求めるのではなく、ひとつひとつの文字に意識を向け、文章の流れに身を委ねる。打ち終えたあとに得られる静かに醒めた満足──それがこのサイトの核心です。
        <br/>
        詳しくは
        <a class="text-link" href="../meditation_typing.html">
         瞑想的タイピングのすすめ
        </a>
        をご覧ください。
       </p>
</div>
</li>
<li>
<button class="accordion-header">
       問題文の特徴
      </button>
<div class="accordion-panel">
<p>
        毎日更新している問題文は、単なる練習素材ではなく、小さな読書体験となるよう目指しています。タイピングしながら読むことの喜びを味わい心を耕す──そんな豊かな時間のため、一つ一つの文章に心を込めています。
       </p>
</div>
</li>
<li>
<button class="accordion-header">
       クラヴィエとは
      </button>
<div class="accordion-panel">
<p>
        「クラヴィエ（Clavier）」は、このサイトに時折現れる「鍵を持つ風」の名です。彼は気まぐれに様々な扉を開き、思いがけない発見や大切な気づきをもたらしてくれるかもしれません。
        <br/>
<a class="text-link" href="../clavier_collection.html">
         「クラヴィエの寓話集」
        </a>
        では、彼が登場する物語を集めています。
        <br/>
<a class="text-link" href="../zCriticism_3.html">
         「風に名が付いた日」
        </a>
        もぜひお読みください。
       </p>
</div>
</li>
<li>
<button class="accordion-header">
       問題文の詳細な解説もあります
      </button>
<div class="accordion-panel">
<p>
        タイピングで通り過ぎた一文に、もう一度立ち止まってみませんか？
        <br/>
<a class="text-link" href="../Criticism_index.html">
         問題文の裏庭（解説アーカイブ）
        </a>
<br/>
        このページでは、各問題文に込めた思考の道筋や、言葉の背景を丁寧にひもといた解説を収録しています。詩のように打ち込んだあの一文が、どんな問いから生まれたのか。笑いの裏にある真剣さや、言葉遊びに託された願いをもう一歩ふかく味わってみたいときに──ぜひ、お立ち寄りください。
       </p>
</div>
</li>
<li>
<button class="accordion-header">
       全文入力が完了したら
      </button>
<div class="accordion-panel">
<p>
        問題文をすべて正しく入力すると、所要時間、入力文字数、WPM（1分間あたりの入力文字数）、ささやかな評価メッセージが表示されます。結果に一喜一憂するよりも、入力中の集中や言葉との出会いをお楽しみください。「Q」キーで結果を閉じ、次の練習に進めます。
       </p>
</div>
</li>
<!--
            <li>
                <button class="accordion-header">寄付のお願い（ページの下部から）</button>
                <div class="accordion-panel">
                    <p>毎日ことばを紡ぎ、静かに更新を続けています。<br>この小さなサイトを気に入ってくださった方、どこか共鳴するものを感じてくださった方へ——<br>ページ下部に、ささやかなご支援の窓口を設けています。ご寄付は、サイトの運営費や今後のコンテンツづくりに大切に使わせていただきます。<br>無理のないかたちで、そっと支えていただけたら、たいへん心強く、ありがたく思います。</p>
                </div>
            </li>
          -->
</ul>
<button class="usage-action-button close-button" id="closeUsageGuideButton">
     閉じる
    </button>
</div>
</div>
<div id="display">
  この間、朝の電車でひとつ分だけ空いた席を見つけました。ふと、あなたならそこに腰かけて、読んでいる本を私にそっと見せてくれただろうなと思って、立ったまま眺めていました。  
景色は流れ、車内はゆれ、私はどこにもいない誰かと並んで座っていた記憶を頼りに、少しだけ目を閉じてみました。誰も気づかぬまま、いくつもの言葉が心の奥でやさしく開いていきます。
きっと、私が今日も静かに過ごせたのは、その空いた席が、あなたの声を置いていってくれたからです。
目をひらいたあとも、まだ少しその温もりが残っていました。口づけを贈ります。
</div>
<textarea id="typingArea" placeholder="ここに全文を入力してください..."></textarea>
<!--お気に入り追加ボタン-->
<div class="favorite-button-fixed" id="favoriteButtonContainer">
<button id="favoriteToggleButton">
    ☆ お気に入りに追加
   </button>
</div>
<section id="archive" style="margin-top: 2rem;">
<div style="margin-top: 1rem; text-align: left;  font-weight: bold;">
<a class="archive-link" href="../clavier_collection.html">
     クラヴィエの寓話集
    </a>
<span style="margin: 0 0.5em; color: #555;">
     ｜
    </span>
<a class="archive-link" href="../archive.html">
     すべてのバックナンバー
    </a>
<span style="margin: 0 0.5em; color: #555;">
     ｜
    </span>
<a class="criticism-link" href="../Criticism_index.html">
     問題文の裏庭（解説アーカイブ）
    </a>
<span style="margin: 0 0.5em; color: #555;">
     ｜
    </span>
<a class="criticism-link" href="../favorites.html">
     お気に入りページ
    </a>
<span style="margin: 0 0.5em; color: #555;">
     ｜
    </span>
<a class="criticism-link" href="https://note.com/kanakantyping">
     note
    </a>
</div>
<div id="archive-list">
</div>
</section>
<div id="popup">
<ul id="popupList">
</ul>
<p>
    （Qキーで閉じる）
   </p>
</div>
<footer style="position: static; bottom: 0; width: 100%; text-align: center; font-size: 12px; padding: 1px; background: #f5f5f5; margin-top: 2rem;">
<p style="margin: 0;">
<a href="../meditation_typing.html" style="color: #007acc;">
     瞑想的タイピングのすすめ
    </a>
    |
    <a href="../philosophy.html" style="color: #007acc;">
     問題文に込めた想い
    </a>
    |
    <a href="../Misconversion.html" style="color: #007acc;">
     誤変換のポエジー
    </a>
<br/>
<br/>
    練習用テキストはすべてフィクションであり、特定の思想、団体、個人を揶揄・批判する意図はありません。
    <br/>
<a href="../terms.html" style="color: #007acc; text-decoration: none;">
     利用規約
    </a>
    |
    <a href="../privacy.html" style="color: #007acc; text-decoration: none;">
     プライバシーポリシー
    </a>
    |
    <a href="../contact.html" style="color: #007acc; text-decoration: none;">
     お問い合わせ
    </a>
</p>
<p style="margin: 0;">
    © 2025 Bunrot's Typing Site. All Rights Reserved.
   </p>
<p style="margin: 0;">
    運営者：Bunrot
   </p>
<hr style="border: none; border-top: 2px solid #3498db;margin-top: 2em; margin-bottom: 0em;"/>
<h3 style="text-align: left; font-size: 1.8em; padding-left: 2.5em;">
    ご支援のかたちをお選びいただけます
    <span style="font-size: 0.6em;">
     （この小さなサイトを気に入ってくださったら、そっとご支援いただけると幸いです。）
    </span>
</h3>
<div class="donation-container">
<!-- OFUSE -->
<div class="donation-box">
<h4>
      🟢 OFUSE：言葉と気持ちを届ける
     </h4>
<p>
      クレジットカードもご利用いただけます。
      <br/>
      下のボタンを押し「ファンレターを送る」を選択します。
      <br/>
      （ 「ゲストとして送信する」と、アカウントがなくても送信できます）
     </p>
<a data-ofuse-color="blue-invert" data-ofuse-id="98141" data-ofuse-size="large" data-ofuse-text="OFUSEでのご寄付" data-ofuse-widget-button="" href="https://ofuse.me/o?uid=98141">
      OFUSEでのご寄付
     </a>
<script async="" charset="utf-8" src="https://ofuse.me/assets/platform/widget.js">
</script>
</div>
<!-- PayPal -->
<div class="donation-box">
<h4>
      🟢 PayPal：自由な額で静かに支援する
     </h4>
<div id="paypal-container-5ZSTK6FHNDKH4">
</div>
<script>
      paypal.HostedButtons({
    hostedButtonId: "5ZSTK6FHNDKH4",
  }).render("#paypal-container-5ZSTK6FHNDKH4")
     </script>
</div>
</div>
</footer>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const closeBtn = document.getElementById("closeIntroBtn");
    const intro = document.getElementById("siteIntro");

    if (closeBtn && intro) {
      closeBtn.addEventListener("click", function () {
        intro.style.display = "none";
      });
    }
  });
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const display = document.getElementById("display");
    const typingArea = document.getElementById("typingArea");
    const popup = document.getElementById("popup");
    const popupList = document.getElementById("popupList");

    // 1. HTMLに埋め込まれた初期問題文を取得します
    const originalText = display.textContent.trim();
    let startTime = null;

    if (!originalText) {
        display.textContent = "問題文がありません。";
        return;
    }

    // 2. 入力に応じて表示を更新するメイン関数
    function updateDisplay() {
        const inputText = typingArea.value;
        display.innerHTML = ""; // 表示を一旦クリア
        let errorMarked = false;

        for (let i = 0; i < originalText.length; i++) {
            const span = document.createElement("span");
            const expectedChar = originalText[i];
            const typedChar = inputText[i];

            if (i < inputText.length) {
                if (!errorMarked) {
                    if (typedChar === expectedChar) {
                        span.className = "correct"; // 正解クラス
                    } else {
                        span.className = "incorrect"; // 不正解クラス
                        errorMarked = true; 
                    }
                } else {
                    span.className = "untyped"; // ミス以降の文字
                }
            } else {
                span.className = "untyped"; // 未入力の文字
            }
            span.textContent = expectedChar;
            display.appendChild(span);
        }

        // 3. すべて正しく入力されたかチェック
        if (!errorMarked && inputText === originalText && originalText.length > 0) {
            showResult();
        }
    }

    // 4. 結果表示用の関数 (index.htmlから主要部分を流用)
    function showResult() {
        if (!startTime) return;
        const elapsed = (Date.now() - startTime) / 1000;
        const charCount = originalText.length;
        const wpm = charCount > 0 && elapsed > 0 ? Math.round((charCount / elapsed) * 60) : 0;

        const getEvaluationMessage = (wpm) => {
             if (wpm >= 350) return "You are Clavier.";
             if (wpm >= 250) return "あなたは鍵をもつ風。";
             if (wpm >= 200) return "あなたの言葉は稲妻。世界を貫いている。";
             if (wpm >= 120) return "思考と指先が調和して、美しい旋律を奏でている。";
             if (wpm >= 60) return "確かな歩みが、言葉をひとつずつ紡いでいく。";
             if (wpm >= 30) return "急がず焦らず、言葉と心を結びつける旅の途中。";
             return "複雑に考えず、自分自身でいること。";
        };
        const getLevelComment = (wpm) => {
             if (wpm >= 350) return "神速の領域。指先で詩を書いているようです。";
             if (wpm >= 250) return "プロフェッショナルの風格。キーボードもあなたに従っている。";
             if (wpm >= 200) return "洗練された速度。タイピングが日常の一部となっている証です。";
             if (wpm >= 120) return "実務でも十分通用します。滑らかな言葉の流れが感じられます。";
             if (wpm >= 60) return "落ち着いたテンポ。着実な力を育んでいます。";
             if (wpm >= 30) return "丁寧さが光っています。正確さは力です。";
             return "始まりの一歩。焦らず、楽しみながら育てていきましょう。";
        };

        popupList.innerHTML = "";
        const createItem = (label, content) => {
            const li = document.createElement("li");
            li.innerHTML = `<strong>${label}</strong> ${content}`;
            return li;
        };

        popupList.appendChild(createItem("所要時間：", `${elapsed.toFixed(1)}秒`));
        popupList.appendChild(createItem("入力文字数：", `${charCount}文字`));
        popupList.appendChild(createItem("WPM：", `${wpm}文字/分　${getLevelComment(wpm)}`));
        popupList.appendChild(createItem("評価：", getEvaluationMessage(wpm)));

        popup.style.display = "block";
        typingArea.blur();
    }

    // 5. イベントリスナーを設定
    typingArea.addEventListener("input", () => {
        if (!startTime && typingArea.value.length > 0) {
            startTime = Date.now();
        }
        if (typingArea.value.length === 0) {
            startTime = null;
        }
        updateDisplay();
    });

    typingArea.addEventListener("paste", (event) => {
        event.preventDefault();
        alert("ペーストは無効です。");
    });

    document.addEventListener('keydown', (e) => {
        if (popup.style.display === 'block' && (e.key === 'q' || e.key === 'Q')) {
            popup.style.display = 'none';
            typingArea.value = "";
            updateDisplay();
            startTime = null;
            typingArea.focus();
            e.preventDefault();
        }
    });

    // 初期化処理：ページ読み込み時にテキストをspanで分割した表示に変換
    updateDisplay();
    typingArea.focus();
});
</script>

</body>
</html>